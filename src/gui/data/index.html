<!doctype html>
<html>
    <head>
            <style>
                .wrapper {
                    width: 170px; /* Set the size of the progress bar */
                    height: 170px;
                    position: absolute; /* Enable clipping */
                    clip: rect(0px, 150px, 150px, 75px); /* Hide half of the progress bar */
                    }
                    /* Set the sizes of the elements that make up the progress bar */
                .circle {
                    width: 130px;
                    height: 130px;
                    border: 10px solid #88C057;
                    border-radius: 93px;
                    position: absolute;
                    clip: rect(0px, 75px, 150px, 0px);
                    transition: transform  0.3s;
                    transform: rotate(0deg);
                    }
            </style>
            <style>
                body{
                    background: #2F374A;
                    width: 300px;
                    font-family: Arial, Helvetica, sans-serif;
                    font-size: 12px;
                    text-align: center;
                    padding-top: 30px;
                    color:#e0e0e0;
                    cursor:default;
                    -webkit-touch-callout: none; /* iOS Safari */
                    -webkit-user-select: none; /* Safari */
                    -khtml-user-select: none; /* Konqueror HTML */
                    -moz-user-select: none; /* Firefox */
                        -ms-user-select: none; /* Internet Explorer/Edge */
                            user-select: none; /* Non-prefixed version, currently
                                                supported by Chrome and Opera */
                }
                
                #choose{
                    float:right
                }
                
                .form{
                    padding-top: 10px;
                }
                
                .progress_container{
                    width: 150px;
                    margin: auto;
                    height: 150px;
                    /* background: red; */
                }

                
                #progress_pointer{
                    float: right;
                    font-size: 25px;
                    color:#ffffff;
                    font-weight: 700;
                    position: relative;
                    top:60px;
                    width:120px;
                    text-align: center;
                    right:15px;
                }
                
                .now_file{
                  color:#c4c4c4;
                  float: left; 
                }
                
                .form_buttons{
                    padding-top: 30px;
                    
                    margin: auto;
                    width: 200px;

                }
                .choosen_directory{
                    float: left;
                }
                
                .animate
                {
                    transition: all 0.1s;
                    -webkit-transition: all 0.1s;
                }
                .action_button{
                    cursor: pointer;
                    width:max-content;
                    display: inline;
                    user-select: none;
                    text-decoration: none;
                }
                .action_button:hover{
                    color: red;
                }
                .form_select{
                    color:#ffffff9d;
                    margin-top: 20px;
                }
                #select_ip{
                    width: 120px;
                    border-radius: 2.5px;
                    background: #c4c4c4;
                    margin-left: 10px;
                }
                
                #begin{
                    /* opacity: 0.3; */
                    margin-top: 20px;
                    
                }
                #begin_svg{
                    width: 50px;
                    margin:auto;
                }
                .active_button_start{
                    transition: all 0.2s ease-in-out;
                    cursor: pointer;
                    border-radius: 50%;
                    box-shadow: 0px 0px 40px -10px rgba(0,0,0,0.49);
                    opacity: 0.7
                }
                .active_button_start:hover{
                    box-shadow: 0px 0px 45px -6px rgba(0,0,0,1);
                    opacity: 1
                }
                .active_button_start:active{
                    box-shadow: none;
                    opacity: 0.9
                }
                #alert{
                    color:red;
                    text-align: center;
                    height: 15px;
                    margin-top: 10px;
                }
                </style>
    </head>
    <body>
           

            <div class="progress_container">
                    <div class="wrapper" data-anim="base wrapper" id="wrapper">
                            <div class="circle" data-anim="base left" id="circle_left"></div>
                            <div class="circle" data-anim="base right" id="circle_right"></div>
                     </div>
                     <div id="progress_pointer">
                         0%
                     </div>
                      
                
            </div>
            <div class="form_buttons">
                    <div class="choosen_directory">
                         Directory: <span id='choosen_directory'>none</span>
                    </div>
                    <div type="button" id="choose" class="action_button">
                            Choose!
                    </div>
                    
                </div>
    
                <div class='form'>
                        <div class="form_select">
                                <span>Receiver IP: </span>       
                                <select id="select_ip">
                                   <option value="127.0.0.1">127.0.0.1</option>    
                                </select>
                        </div>
            
            <div id="alert"></div>
            </div>
            <div  id="begin">
                <div id="begin_svg" onclick="startLoad()">
                <svg  class="active_button_start" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 54 54" style="enable-background:new 0 0 54 54;" xml:space="preserve">
                    <g>
                            <g>
                                <path style="fill:#88C057;" d="M53,27L53,27c0,14.359-11.641,26-26,26h0C12.641,53,1,41.359,1,27v0C1,12.641,12.641,1,27,1h0
                                    C41.359,1,53,12.641,53,27z"/>
                                <path style="fill:#88C057;" d="M27,54C12.112,54,0,41.888,0,27S12.112,0,27,0s27,12.112,27,27S41.888,54,27,54z M27,2
                                    C13.215,2,2,13.215,2,27s11.215,25,25,25s25-11.215,25-25S40.785,2,27,2z"/>
                            </g>
                            <g>
                                <path style="fill:#FFFFFF;" d="M28.017,17.856l8.719,15.101C37.004,33.421,36.669,34,36.134,34H18.696
                                    c-0.535,0-0.87-0.579-0.602-1.043l8.719-15.101C27.081,17.392,27.75,17.392,28.017,17.856z"/>
                                <path style="fill:#FFFFFF;" d="M36.134,35H18.696c-0.613,0-1.162-0.316-1.469-0.848c-0.306-0.53-0.307-1.164,0-1.695l8.719-15.102
                                    c0.307-0.53,0.855-0.848,1.469-0.848s1.162,0.317,1.469,0.848l8.719,15.102c0.307,0.531,0.306,1.165,0,1.695
                                    C37.296,34.684,36.747,35,36.134,35z M19.224,33h16.383l-8.191-14.188L19.224,33z"/>
                            </g>
                        </g>
                </svg>
                </div>
                        
                </div>
            <!-- <input id="files" type="file" webkitdirectory directory multiple/> -->
            <script>
                document.getElementById('choose').addEventListener("click", chooseFunc);
                // document.getElementById('begin_svg').addEventListener('click', start)
                window.transData = {path: "none"};
                var last_fin = 0;
                function startLoad(){
                    console.log("Hello")
                    if(window.transData.path=="none"){
                        document.getElementById("alert").innerHTML="Choose directory!!!"
                    }else{
                        document.getElementById("alert").innerHTML=""
                    }
                }
                

                function sleep (time, resolve) {
                    (function (resolve) {
                        setTimeout(function () { 
                            resolve();
                        },time)
                    })(resolve)
                }  

                function progress(val){
                    var fin = 3.6* val
                    if(fin>180){
                        document.getElementById("circle_left").style.transform = "rotate(180deg)"
                        document.getElementById("circle_right").style.transform = "rotate("+fin+"deg)"
                        
                        // bug with transitions
                        if(last_fin<=180){
                            sleep(300, function(){
                                document.getElementById("wrapper").style.clip="rect(auto,auto,auto,auto)" 
                            });
                        }
                        last_fin = fin;
                        
                    }else{
                        document.getElementById("wrapper").style.clip="rect(0px,150px,150px,75px)"
                        document.getElementById("circle_left").style.transform = "rotate("+fin+"deg)"
                        document.getElementById("circle_right").style.transform = "rotate(0deg)"
                        last_fin = fin;
                    }
                    document.getElementById('progress_pointer').innerHTML = event.target.value+"%"
                }


                
                function chooseFunc(){
                    window.external.invoke('opendir');
                    if(window.transData.path.length==0){
                        window.transData.path = "none"
                    }
                    var path =  window.transData.path
                    if(window.transData.path.length>=10){path = window.transData.path.slice(0,7)}
                    document.getElementById('choosen_directory').innerHTML = path;
                }

                function beginFunc(){
                    
                }


            </script>
    </body>
</html>